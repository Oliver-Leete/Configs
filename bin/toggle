#!/bin/sh
sound() {
	if pgrep pavucontrol; then
		pkill pavucontrol
	else
		pavucontrol &
		dunstify -r 102 "Volume: $(pactl get-sink-volume @DEFAULT_SINK@ | rg -o -e "[0-9]{1,3}%" | head -n 1)" &
	fi
}

network() {
	if pgrep -f nm-connection-editor; then
		pkill -f nm-connection-editor
	else
		nm-connection-editor &
		dunstify -r 103 "$(nmcli -t device | rg -e "[^(dis)]connected" | sed -E -e 's/.*(wifi|ethernet).*:([^:])/\1: \2/')" &
	fi
}

bluetooth() {
	if pgrep blueberry; then
		pkill blueberry
	else
		blueberry &
	fi
}

battery() {
	if pgrep tlpui; then
		pkill tlpui
	else
		tlpui &
        dunstify -r 105 "$(acpi -b | rg -o -e "(Disc|C)?harging"): $(acpi -b | rg -o -e "[0-9]{1,3}%")
Time Remaining: $(acpi -b | rg -o -e "[0-9]{2}:[0-9]{2}")" &
	fi
}

case ${1:-} in
sound) sound ;;
network) network ;;
bluetooth) bluetooth ;;
battery) battery ;;
*) ;;
esac
exit
