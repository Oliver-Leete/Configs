#!/bin/bash

vol () {
    result=$(rofi -matching fuzzy -l 0 -window-title "Volume" -dmenu "Volume")
    /home/oleete/.config/bin/volume set-sink-volume @DEFAULT_SINK@ "$result"%
}

brightness () {
    result=$(rofi -matching fuzzy -l 0 -window-title "Brightness" -dmenu "Brightness")
    /home/oleete/.config/bin/brightness -set "$result"
}

display () {
    displayctl menu
}

network () {
    networkmanager_dmenu
}

menu () {
    items="
    lock
    play
    pause
    dnd

    apps
    utilities
    commands
    windows

    next
    skip
    prev

    sound
    sound-input
    display
    network
    bluetooth
    settings

    volume
    brightness

    sys-mon
    terminal
    calculator
    music
    discord

    tasks
    notes
    calendar
    gmail

    colour-picker
    calculator
    screenshot
    screenshot-area
    screencap
    screencap-area
    screenkey
    screenkey-settings

    goto-project
    move-project
    goto-move-project

    presets
    modify-preset
    make-preset

    mirror
    mirror_stack
    centre_main

    logout
    suspend
    hibernate
    shutdown
    reboot
    "
    result=$((for item in $items; do echo $item; done) | rofi -matching fuzzy -window-title "Menu" -dmenu "Menu")
    case ${result:-} in
        lock)       slock           ;;
        play) playerctl play ;;
        pause) playerctl pause ;;
        dnd) /home/oleete/.config/bin/toggle DND_menu ;;

        apps) rofi -matching fuzzy -show drun -show-icons ;;
        utilities)  utilities       ;;
        commands) rofi -matching fuzzy -show run ;;
        windows) rofi -matching fuzzy -show window ;;

        next|skip) playerctl next ;;
        prev) playerctl previous ;;
        music) /home/oleete/.cabal/bin/xmonadctl-exe nsp-musc ;;

        sound) /home/oleete/.config/bin/soundctl sink-menu;;
        sound-input) /home/oleete/.config/bin/soundctl source-menu;;
        display)    /home/oleete/.config/bin/displayctl ;;
        network)    network         ;;
        bluetooth)  /home/oleete/.config/bin/rofi-bluetooth ;;
        settings)   settings        ;;

        volume)     vol             ;;
        brightness) brightness      ;;

        sys-mon) /home/oleete/.cabal/bin/xmonadctl-exe nsp-sysm ;;
        terminal) /home/oleete/.cabal/bin/xmonadctl-exe nsp-cons ;;
        calculator) /home/oleete/.cabal/bin/xmonadctl-exe nsp-calc ;;
        discord) /home/oleete/.cabal/bin/xmonadctl-exe nsp-disc ;;
        music) /home/oleete/.cabal/bin/xmonadctl-exe nsp-musc ;;

        tasks) workLauncher task ;;
        notes) workLauncher note ;;
        gmail) workLauncher gmail ;;
        calendar) workLauncher gcal ;;

        colour-picker) /home/oleete/.config/bin/colorPicker ;;
        calculator) xmonadctl-exe nsp-calc ;;
        screenshot) /home/oleete/.config/bin/screencapt ;;
        screenshot-area) /home/oleete/.config/bin/screencapt area ;;
        screencap) /home/oleete/.config/bin/screencast ;;
        screencap-area) /home/oleete/.config/bin/screencast area ;;
        screenkey) screenkey ;;
        screenkey-settings) screenkey --show-settings ;;

        goto-project) /home/oleete/.config/bin/wsHarpoon menu ;;
        move-project) /home/oleete/.config/bin/wsHarpoon moveMenu ;;
        goto-move-project) /home/oleete/.config/bin/wsHarpoon goMoveMenu ;;

        presets) /home/oleete/.config/bin/wsHarpoon preset ;;
        edit-preset)/home/oleete/.config/bin/wsHarpoon modify ;;
        make-preset)/home/oleete/.config/bin/wsHarpoon makePreset ;;

        mirror) /home/oleete/.cabal/bin/xmonadctl-exe layout-dir ;;
        mirror_stack) /home/oleete/.cabal/bin/xmonadctl-exe layout-stack-dir ;;
        centre_main) /home/oleete/.cabal/bin/xmonadctl-exe layout-style ;;

        logout)     pkill xmonad      ;;
        suspend)    systemctl suspend   ;;
        hibernate)  systemctl hibernate ;;
        shutdown)   systemctl poweroff  ;;
        reboot)     systemctl reboot    ;;
    esac
}

workLauncher () {
    WS=$(wmctrl -d | grep '*' | cut -c33- | sed 's/ /-/')
    WSS="Wrk Wrk1 Thesis Comments Sim Exp ANSYS" 
    if [[ "$WSS" == *"$WS"* ]]; then
        /home/oleete/.cabal/bin/xmonadctl-exe nsp-$1-wrk
    else
        /home/oleete/.cabal/bin/xmonadctl-exe nsp-$1
    fi
}

menu "$@"
