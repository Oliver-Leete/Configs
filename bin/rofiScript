#!/bin/bash

vol () {
    result=$(rofi -matching fuzzy -l 0 -window-title "Volume" -dmenu "Volume")
    /home/oleete/.config/bin/volume set-sink-volume @DEFAULT_SINK@ "$result"%
}

brightness () {
    result=$(rofi -matching fuzzy -l 0 -window-title "Brightness" -dmenu "Brightness")
    /home/oleete/.config/bin/brightness -set "$result"
}

display () {
    displayctl menu
}

network () {
    networkmanager_dmenu
}

menu () {
    items="
    lock
    play
    pause
    dnd
    discord

    apps
    utilities
    commands
    windows
    workspaces

    next
    skip
    prev
    music

    sound
    sound-input
    display
    network
    bluetooth
    settings

    volume
    brightness

    sys-mon

    admin
    toggl-time

    terminal
    calculator
    colour-picker
    ruler

    screenshot
    screenshot-area
    screencap
    screencap-area
    screencap-to-gif
    screenkey
    screenkey-settings

    mirror
    mirror_stack
    centre_main
    shrink_stack
    expand_stack

    full-screen
    full-bar
    centre-screen
    two-pane

    kill-self
    kill-others

    status

    logout
    suspend
    hibernate
    shutdown
    reboot
    "
    result=$((for item in $items; do echo $item; done) | rofi -matching fuzzy -window-title "Menu" -dmenu "Menu")
    case ${result:-} in

        lock)               slock           ;;
        play)               playerctl play ;;
        pause)              playerctl pause ;;
        dnd)                /home/oleete/.config/bin/toggle DND_menu ;;
        discord)            /home/oleete/.cabal/bin/xmonadctl-exe nsp-disc ;;

        apps)               rofi -matching fuzzy -show drun -show-icons ;;
        utilities)          utilities       ;;
        commands)           rofi -matching fuzzy -show run ;;
        windows)            rofi -matching fuzzy -show window ;;
        workspaces)         /home/oleete/.config/bin/wsHarpoon mainMenu ;;

        next|skip)          playerctl next ;;
        prev)               playerctl previous ;;
        music)              /home/oleete/.cabal/bin/xmonadctl-exe nsp-musc ;;

        sound)              /home/oleete/.config/bin/soundctl sink-menu;;
        sound-input)        /home/oleete/.config/bin/soundctl source-menu;;
        display)            /home/oleete/.config/bin/displayctl ;;
        network)            network         ;;
        bluetooth)          /home/oleete/.config/bin/rofi-bluetooth ;;
        settings)           settings        ;;

        volume)             vol             ;;
        brightness)         brightness      ;;

        sys-mon)            /home/oleete/.cabal/bin/xmonadctl-exe nsp-sysm ;;

        admin)              workLauncher gcal ;;
        toggl-time)         /home/oleete/.cabal/bin/xmonadctl-exe nsp-time ;;

        terminal)           /home/oleete/.cabal/bin/xmonadctl-exe nsp-cons ;;
        calculator)         /home/oleete/.cabal/bin/xmonadctl-exe nsp-calc ;;
        colour-picker)      /home/oleete/.config/bin/colorPicker ;;
        ruler)              kruler ;;

        screenshot)         /home/oleete/.config/bin/screencapt ;;
        screenshot-area)    /home/oleete/.config/bin/screencapt area ;;
        screencap)          /home/oleete/.config/bin/screencast ;;
        screencap-area)     /home/oleete/.config/bin/screencast area ;;
        screencap-to-gif)   /home/oleete/.config/bin/screencast gif-last ;;
        screenkey)          killall screenkey || screenkey ;;
        screenkey-settings) screenkey --show-settings ;;

        mirror)             /home/oleete/.cabal/bin/xmonadctl-exe layout-dir ;;
        mirror_stack)       /home/oleete/.cabal/bin/xmonadctl-exe layout-stack-dir ;;
        centre_main)        /home/oleete/.cabal/bin/xmonadctl-exe layout-style ;;
        shrink_stack)       /home/oleete/.cabal/bin/xmonadctl-exe layout-stack-shrink ;;
        expand_stack)       /home/oleete/.cabal/bin/xmonadctl-exe layout-stack-expand ;;
        full-screen)        /home/oleete/.cabal/bin/xmonadctl-exe layout-full ;;
        full-bar)           /home/oleete/.cabal/bin/xmonadctl-exe layout-fullbar ;;
        centre-screen)      /home/oleete/.cabal/bin/xmonadctl-exe layout-fullcentre ;;
        two-pane)           /home/oleete/.cabal/bin/xmonadctl-exe layout-twopane ;;

        kill-self)          /home/oleete/.cabal/bin/xmonadctl-exe kill-self ;;
        kill-others)        /home/oleete/.cabal/bin/xmonadctl-exe kill-others ;;

        status)             /home/oleete/.config/bin/statusNotify ;;

        logout)             pkill xmonad      ;;
        suspend)            systemctl suspend   ;;
        hibernate)          systemctl hibernate ;;
        shutdown)           systemctl poweroff  ;;
        reboot)             systemctl reboot    ;;

    esac
}

workLauncher () {
    WS=$(wmctrl -d | grep '*' | awk '{print $NF}')
    WSS="Wrk Wrk1 Thesis Comments Sim Exp ANSYS WrkNotes Scinilla Scin-Docs"
    if [[ "$WSS" == *"$WS"* ]]; then
        /home/oleete/.cabal/bin/xmonadctl-exe nsp-$1-wrk
    else
        /home/oleete/.cabal/bin/xmonadctl-exe nsp-$1
    fi
}

menu "$@"
